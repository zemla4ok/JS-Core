# 3 -- Для чего

Регулярные выражения (их еще называют regexp, или regex) — это механизм для поиска и замены текста. В строке, файле, нескольких файлах... 
Их используют разработчики в коде приложения, тестировщики в автотестах, да просто при работе в командной строке!

Чем это лучше простого поиска? Тем, что позволяет задать шаблон.

Например, на вход приходит дата рождения в формате ДД.ММ.ГГГГГ. Вам надо передать ее дальше, но уже в формате ГГГГ-ММ-ДД. 
Как это сделать с помощью простого поиска? Вы же не знаете заранее, какая именно дата будет.

А еще для замены — например, чтобы изменить формат всех дат в файле. Если дата одна, можно изменить вручную. 
А если их 200, проще написать регулярку и подменить автоматически. 
Тем более что регулярные выражения поддерживаются даже простым блокнотом (в Notepad++ они точно есть).

# ================================================================

# 4 -- флаги

g — глобальный поиск (обрабатываются все совпадения с шаблоном поиска);
i — регистр букв не имеет значения;
m — многострочный поиск;
s — текст трактуется как одна строка, в этом случае метасимволу . (точка) соответствует любой одиночный символ, включая символ новой строки;
u — unicode-трактовка. Выражение может содержать специальные паттерны, характерные для юникода, например, /\p{Lu}/ — заглавные буквы.
Флаг указывается после паттерна, например, вот так: /[0-9]$/m.




Метод str.match(regexp) ищет совпадения с regexp в строке str.
Если у регулярного выражения нет флага g, то он возвращает первое совпадение в виде массива со скобочными группами и свойствами index (позиция совпадения), input (строка поиска, равна str):
Если у регулярного выражения есть флаг g, то он возвращает массив всех совпадений, без скобочных групп и других деталей.
Если совпадений нет, то, вне зависимости от наличия флага g, возвращается null.
Это очень важный нюанс. При отсутствии совпадений возвращается не пустой массив, а именно null. Если об этом забыть, можно легко допустить ошибку, например:



Метод str.matchAll(regexp) – «новый, улучшенный» вариант метода str.match.
Он используется, в первую очередь, для поиска всех совпадений вместе со скобочными группами.
У него 3 отличия от match:
Он возвращает не массив, а перебираемый объект с результатами, обычный массив можно сделать при помощи Array.from.
Каждое совпадение возвращается в виде массива со скобочными группами (как str.match без флага g).
Если совпадений нет, то возвращается не null, а пустой перебираемый объект.



str.split(regexp|substr, limit)
Разбивает строку в массив по разделителю – регулярному выражению regexp или подстроке substr.
Обычно мы используем метод split со строками, вот так:


str.search(regexp)
Метод str.search(regexp) возвращает позицию первого совпадения с regexp в строке str или -1, если совпадения нет.
Например:
Важное ограничение: str.search умеет возвращать только позицию первого совпадения.
Если нужны позиции других совпадений, то следует использовать другой метод, например, найти их все при помощи str.matchAll(regexp).





Метод regexp.exec(str) ищет совпадение с regexp в строке str. В отличие от предыдущих методов, вызывается на регулярном выражении, а не на строке.
Он ведёт себя по-разному в зависимости от того, имеет ли регулярное выражение флаг g.
Если нет g, то regexp.exec(str) возвращает первое совпадение в точности как str.match(regexp). Такое поведение не даёт нам ничего нового.
Но если есть g, то:
Вызов regexp.exec(str) возвращает первое совпадение и запоминает позицию после него в свойстве regexp.lastIndex.
Следующий такой вызов начинает поиск с позиции regexp.lastIndex, возвращает следующее совпадение и запоминает позицию после него в regexp.lastIndex.
…И так далее.
Если совпадений больше нет, то regexp.exec возвращает null, а для regexp.lastIndex устанавливается значение 0.
Таким образом, повторные вызовы возвращают одно за другим все совпадения, используя свойство regexp.lastIndex для отслеживания текущей позиции поиска.
В прошлом, до появления метода str.matchAll в JavaScript, вызов regexp.exec использовали для получения всех совпадений с их позициями и группами скобок в цикле:




regexp.test(str)
Метод regexp.test(str) ищет совпадение и возвращает true/false, в зависимости от того, находит ли он его.
Например: